<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Qt实现编译本地文件生成运行程序的功能</title>
    <url>/2019/12/10/2019-12-10-add-compiler/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>如何在文本编辑器中加入c、c++文本编译成可执行程序功能呢</p>
<a id="more"></a>
<h4 id="添加系统环境"><a href="#添加系统环境" class="headerlink" title="添加系统环境"></a>添加系统环境</h4><p>要进行c、c++文件的编译需要用到<code>MinGW</code>，查找本地路径<code>(如: D:\Dev-Cpp\MinGW64\bin)</code>并将其添加到系统环境变量<code>Path</code>中。</p>
<h4 id="声明进程实例-MainWindow-h"><a href="#声明进程实例-MainWindow-h" class="headerlink" title="声明进程实例(MainWindow.h)"></a>声明进程实例(MainWindow.h)</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;QProcess&gt;</span></span><br><span class="line">private:</span><br><span class="line">    bool isRunning;</span><br><span class="line">    QProcess process;</span><br></pre></td></tr></table></figure>
<h4 id="运行进程-MainWindow-cpp"><a href="#运行进程-MainWindow-cpp" class="headerlink" title="运行进程(MainWindow.cpp)"></a>运行进程(MainWindow.cpp)</h4><p>构造函数中将进程相应信号与槽函数对应</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">connect(&amp;process,SIGNAL(finished(int)),this,SLOT(runFinished(int)));</span><br><span class="line">connect(&amp;process,SIGNAL(readyReadStandardOutput()),this,SLOT(updateOutput()));</span><br><span class="line">connect(&amp;process,SIGNAL(readyReadStandardError()),this,SLOT(updateError()));</span><br></pre></td></tr></table></figure>
<p>通过环境变量中配置的编译器编译源程序文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void MainWindow::Run(bool)</span><br><span class="line">&#123;</span><br><span class="line">    QString filePath, fileName, absolutePath;</span><br><span class="line">    <span class="keyword">if</span>(isRunning)&#123;</span><br><span class="line">        process.terminate();</span><br><span class="line">        ui-&gt;action_Run-&gt;setIcon(QIcon(<span class="string">":/images/run"</span>));</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(activeEditor())&#123;</span><br><span class="line">        // 检查是否文件已保存</span><br><span class="line">        <span class="keyword">if</span>(activeEditor()-&gt;okToContinue() &amp;&amp; !activeEditor()-&gt;toPlainText().isEmpty())&#123;</span><br><span class="line">            isRunning = <span class="literal">true</span>;</span><br><span class="line">            filePath = activeEditor()-&gt;getCurrentFile();</span><br><span class="line">            fileName = QFileInfo(filePath).baseName();</span><br><span class="line">            absolutePath = QFileInfo(filePath).absolutePath();</span><br><span class="line">            buildPath= absolutePath + tr(<span class="string">"/%1%2"</span>).arg(fileName).arg(<span class="string">".exe"</span>);</span><br><span class="line">            ui-&gt;textEdit-&gt;append(tr(<span class="string">"Starting %1..."</span>).arg(buildPath));</span><br><span class="line">            ui-&gt;textEdit-&gt;append(tr(<span class="string">"g++ %1 -o %2"</span>).arg(filePath).arg(buildPath));</span><br><span class="line">            process.start(<span class="string">"cmd"</span>, QStringList() &lt;&lt; <span class="string">"/c"</span> &lt;&lt;</span><br><span class="line">			QString(tr(<span class="string">"g++ "</span>)+filePath+tr(<span class="string">" -o "</span>)+buildPath));</span><br><span class="line">            process.waitForStarted();</span><br><span class="line">            process.start(buildPath, QStringList()&lt;&lt;<span class="string">"1"</span>);</span><br><span class="line">            ui-&gt;action_Run-&gt;setIcon(QIcon(<span class="string">":/images/stop"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>进程各种状态的处理槽函数</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void MainWindow::runFinished(int code)&#123;</span><br><span class="line">    ui-&gt;textEdit-&gt;append(tr(<span class="string">"%1 exited with code %2\n"</span>).arg(buildPath).arg(code));</span><br><span class="line">    ui-&gt;action_Run-&gt;setIcon(QIcon(<span class="string">":/images/run"</span>));</span><br><span class="line">    isRunning=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">void MainWindow::<span class="function"><span class="title">updateOutput</span></span>()&#123;</span><br><span class="line">    QString output=QString::fromLocal8Bit(process.readAllStandardOutput());</span><br><span class="line">    ui-&gt;textEdit-&gt;append(output);</span><br><span class="line">&#125;</span><br><span class="line">void MainWindow::<span class="function"><span class="title">updateError</span></span>()&#123;</span><br><span class="line">    QString error=QString::fromLocal8Bit(process.readAllStandardError());</span><br><span class="line">    ui-&gt;textEdit-&gt;setTextColor(Qt::red);</span><br><span class="line">    ui-&gt;textEdit-&gt;append(error);</span><br><span class="line">    process.terminate();</span><br><span class="line">    isRunning=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行效果如下图:<br><img src="https://i.loli.net/2019/12/10/SeWJhlf5AMwxrOH.png" alt="run.png"></p>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt-compiler</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt实现类PostMan的get、post请求</title>
    <url>/2019/12/07/2019-12-7-qt-getpost-tool/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Qt怎么开发一个简易的http测试工具呢？</p>
<a id="more"></a>
<h4 id="引入Qt相应网络类的头文件-getPostTool-h"><a href="#引入Qt相应网络类的头文件-getPostTool-h" class="headerlink" title="引入Qt相应网络类的头文件(getPostTool.h)"></a>引入Qt相应网络类的头文件(getPostTool.h)</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;QNetworkAccessManager&gt;    //加载网络请求头文件</span></span><br><span class="line"><span class="comment">#include &lt;QNetworkReply&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QNetworkRequest&gt;      //加载发送请求头文件</span></span><br><span class="line">private slots:</span><br><span class="line">    void oneProcessFinished(QNetworkReply *);</span><br><span class="line">private:</span><br><span class="line">    QNetworkAccessManager *manage;      //定义</span><br></pre></td></tr></table></figure>
<p>在构造函数中实例化(getPostTool.cpp)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">manage = new QNetworkAccessManager(this);       //分配空间</span><br><span class="line">connect(manage,SIGNAL(finished(QNetworkReply*)),this,SLOT(oneProcessFinished(QNetworkReply*)));//绑定完成信号</span><br></pre></td></tr></table></figure>
<p>开始发送请求</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void getPostTool::<span class="function"><span class="title">on_pushButton_clicked</span></span>()&#123;</span><br><span class="line">	QNetworkRequest req;</span><br><span class="line">	QJsonObject json;</span><br><span class="line">	QJsonDocument doc;</span><br><span class="line">	QString raw;</span><br><span class="line">	QByteArray data; // 最终传输的数据</span><br><span class="line">	QString url = ui-&gt;lineEdit-&gt;text();     //获取地址</span><br><span class="line">	req.setUrl(QUrl(url));     //获取地址</span><br><span class="line">	req.setHeader(QNetworkRequest::ContentTypeHeader,<span class="string">"application/json"</span>);</span><br><span class="line">	manage-&gt;get(QNetworkRequest(QUrl(url)));    //请求实现</span><br><span class="line">	manage-&gt;post(req, data);    //请求实现</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>绑定完成信号函数</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void getPostTool::oneProcessFinished(QNetworkReply *reply)&#123;</span><br><span class="line">	QString body = reply-&gt;readAll();</span><br><span class="line">	ui-&gt;textEdit-&gt;setText(body);</span><br><span class="line">	reply-&gt;deleteLater();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大致上的主体功能就是这样，然后要加上发送时的<code>ContentTypeHeader</code>及参数量可设置，可以用<code>tabWidget</code>实现两个选项卡的切换，然后对于参数量可设置下多参数的输入可使用<code>tableView</code>来编辑和显示。至于<code>raw</code>格式的参数则可用<code>QtextEdit</code>来编辑。多参数输入<code>x-www-form-urlencoded(ui-&gt;rb_xw)</code>与<code>raw(ui-&gt;rb_raw)</code>格式同在一个<code>tab</code>页面下，可使用<code>radioButton</code>和<code>ButtonGroup(setBodyBtnGroup)</code>来实现单选模式，用<code>setVisible(setBody(int))</code>实现显示切换。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void getPostTool::<span class="function"><span class="title">InitXwwListModel</span></span>()&#123;</span><br><span class="line">	xwwListModel=new QStandardItemModel(this);</span><br><span class="line">	setBodyBtnGroup = new QButtonGroup(this);</span><br><span class="line">	setBodyBtnGroup-&gt;addButton(ui-&gt;rb_xw);</span><br><span class="line">	setBodyBtnGroup-&gt;addButton(ui-&gt;rb_raw);</span><br><span class="line">	connect(setBodyBtnGroup,SIGNAL(buttonClicked(int)),this,SLOT(setBody(int)));</span><br><span class="line">	ui-&gt;tableView_xww-&gt;setVisible(<span class="literal">true</span>);</span><br><span class="line">	ui-&gt;textEdit_raw-&gt;setVisible(<span class="literal">false</span>);</span><br><span class="line">	ui-&gt;btn_addNewRow-&gt;setVisible(<span class="literal">true</span>);</span><br><span class="line">	// 自动延伸填满整个宽度</span><br><span class="line">	ui-&gt;tableView_xww-&gt;horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);</span><br><span class="line">	// 背景色交替</span><br><span class="line">	ui-&gt;tableView_xww-&gt;setAlternatingRowColors(<span class="literal">true</span>);</span><br><span class="line">	ui-&gt;tableView_xww-&gt;setStyleSheet(<span class="string">"QTableView::item &#123;alternate-background-color: #f3f4f5;&#125;"</span>);</span><br><span class="line">	// 设置选中行背景色</span><br><span class="line">	ui-&gt;tableView_xww-&gt;setStyleSheet(<span class="string">"QTableView::item:selected &#123;background-color: #F8F0DD;color: #3a3a3a;&#125;"</span>);</span><br><span class="line">	ui-&gt;tableView_xww-&gt;setModel(xwwListModel);</span><br><span class="line">	//设置不显示格子线</span><br><span class="line">	ui-&gt;tableView_xww-&gt;setShowGrid(<span class="literal">false</span>);</span><br><span class="line">	ui-&gt;tableView-&gt;setUpdatesEnabled(<span class="literal">false</span>);</span><br><span class="line">	xwwListModel-&gt;setHorizontalHeaderItem(0,new QStandardItem(QObject::tr(<span class="string">"KEY"</span>)));</span><br><span class="line">	xwwListModel-&gt;setHorizontalHeaderItem(1,new QStandardItem(QObject::tr(<span class="string">"VALUE"</span>)));</span><br><span class="line">	xwwListModel-&gt;setHorizontalHeaderItem(2,new QStandardItem(QObject::tr(<span class="string">"DESCRIPTION"</span>)));</span><br><span class="line">	xwwListModel-&gt;setHorizontalHeaderItem(3,new QStandardItem(QObject::tr(<span class="string">"OPTION"</span>)));</span><br><span class="line">	on_btn_addNewRow_clicked();</span><br><span class="line">	ui-&gt;tableView-&gt;setUpdatesEnabled(<span class="literal">true</span>);</span><br><span class="line">	ui-&gt;tableView-&gt;setEditTriggers(QAbstractItemView::DoubleClicked);</span><br><span class="line">&#125;</span><br><span class="line">void getPostTool::setBody(int index)&#123;</span><br><span class="line">    switch (index) &#123;</span><br><span class="line">    <span class="keyword">case</span> -2:</span><br><span class="line">        ui-&gt;tableView_xww-&gt;setVisible(<span class="literal">true</span>);</span><br><span class="line">        ui-&gt;textEdit_raw-&gt;setVisible(<span class="literal">false</span>);</span><br><span class="line">        ui-&gt;btn_addNewRow-&gt;setVisible(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span> -3:</span><br><span class="line">        ui-&gt;tableView_xww-&gt;setVisible(<span class="literal">false</span>);</span><br><span class="line">        ui-&gt;textEdit_raw-&gt;setVisible(<span class="literal">true</span>);</span><br><span class="line">        ui-&gt;btn_addNewRow-&gt;setVisible(<span class="literal">false</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参数数量可变化，则应在每一行加入删除按钮</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 新建一行</span><br><span class="line">void getPostTool::on_btn_addNewRow_clicked()</span><br><span class="line">&#123;</span><br><span class="line">    int i = xwwListModel-&gt;rowCount();</span><br><span class="line">    <span class="keyword">for</span>(int j=0;j&lt;3;j++)&#123;</span><br><span class="line">        xwwListModel-&gt;setItem(i,j,new QStandardItem(<span class="string">""</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    add_del_btn(i);</span><br><span class="line">&#125;</span><br><span class="line">// 在第四列添加删除按钮</span><br><span class="line">void getPostTool::add_del_btn(int i)&#123;</span><br><span class="line">    //为这个第四列添加按钮</span><br><span class="line">    QPushButton *btn_delrow = new QPushButton(<span class="string">"remove row"</span>);</span><br><span class="line">    btn_delrow-&gt;setProperty(<span class="string">"row"</span>, i);  //为按钮设置row属性</span><br><span class="line">    connect(btn_delrow, SIGNAL(clicked(bool)), this, SLOT(removeRow(bool)));</span><br><span class="line">    ui-&gt;tableView_xww-&gt;setIndexWidget(xwwListModel-&gt;index(xwwListModel-&gt;rowCount()-1, 3), btn_delrow);</span><br><span class="line">&#125;</span><br><span class="line">// 移除本行</span><br><span class="line">void getPostTool::removeRow(bool)&#123;</span><br><span class="line">    xwwListModel-&gt;removeRow(ui-&gt;tableView_xww-&gt;currentIndex().row());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>发送体有两种选择，用<code>setBodyBtnGroup-&gt;checkedId()</code>确认是<code>x-www-form-urlencoded</code>或<code>raw</code>格式<code>(on_pushButton_clicked())</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">switch (setBodyBtnGroup-&gt;checkedId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> -2: // xww</span><br><span class="line">        <span class="keyword">for</span>(int i=0; i&lt;xwwListModel-&gt;rowCount();i++)&#123;</span><br><span class="line">            json.insert(xwwListModel-&gt;item(i,0)-&gt;text(), xwwListModel-&gt;item(i,1)-&gt;text());</span><br><span class="line">        &#125;</span><br><span class="line">        doc.setObject(json);</span><br><span class="line">        data = doc.toJson(QJsonDocument::Compact);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span> -3: // raw</span><br><span class="line">        raw = ui-&gt;textEdit_raw-&gt;toPlainText();</span><br><span class="line">        data = raw.toUtf8();</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用<code>ui-&gt;comboBox-&gt;currentIndex()</code>确认是<code>get</code>或<code>post</code>请求</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">switch (ui-&gt;comboBox-&gt;currentIndex()) &#123;</span><br><span class="line">	<span class="keyword">case</span> 0: //get</span><br><span class="line">		manage-&gt;get(QNetworkRequest(QUrl(url)));    //请求实现</span><br><span class="line">		<span class="built_in">break</span>;</span><br><span class="line">	<span class="keyword">case</span> 1: //post</span><br><span class="line">		req.setUrl(QUrl(url));     //获取地址</span><br><span class="line">		req.setHeader(QNetworkRequest::ContentTypeHeader, headerListModel-&gt;item(0,1)-&gt;text());// <span class="string">"application/json"</span></span><br><span class="line">		manage-&gt;post(req, data);    //请求实现</span><br><span class="line">		<span class="built_in">break</span>;</span><br><span class="line">	default:</span><br><span class="line">		<span class="built_in">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后运行起来的大致就如下图<br><img src="https://i.loli.net/2019/12/07/HIhD53Lakfd8iEp.png" alt="raw.png"><br><img src="https://i.loli.net/2019/12/07/ITQFVLSngOZl6u7.png" alt="xwww.png"></p>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt-get-post</tag>
      </tags>
  </entry>
  <entry>
    <title>QSetting读取.ini配置文件及设置对话框与主窗口的通信</title>
    <url>/2019/12/06/2019-12-6-qt-setting-MainWindow-signal/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>QSetting的使用</p>
<a id="more"></a>
<p>整体流程为MainWindow构造函数内运行<code>preference</code>函数创建<code>Setting</code>类的实例，并运行实例的<code>readSetting</code>函数从本地<code>config.ini</code>文件读取值，然后运行实例的<code>sendSignal</code>函数将相应值以信号的方式发送给<code>MainWindow</code>，<code>MainWindow</code>调用相应的槽函数进行处理。这样在主程序加载完成之时就可以保持设置和保存在本地文件的一致了。然后在<code>MainWindow</code>菜单栏点击<code>Preference</code>按钮的时候，根据checked的真假来决定<code>Setting</code>类的实例的显示。这样，配置文件的读取、设置对话框与主窗口的通信、主程序启动时自动读取设置三个问题就解决了。</p>
<p>主程序调用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Preference(<span class="literal">false</span>); // 主窗口构造函数中</span><br><span class="line">void MainWindow::Preference(bool checked)&#123;</span><br><span class="line">    Setting *pre = new Setting(this);</span><br><span class="line">    connect(pre,SIGNAL(showMainMenuSignal(bool)),this,SLOT(showMainMenu(bool)));</span><br><span class="line">    connect(pre,SIGNAL(showToolBarSignal(bool)),this,SLOT(showToolBar(bool)));</span><br><span class="line">    connect(pre,SIGNAL(showStatusBarSignal(bool)),this,SLOT(showStatusBar(bool)));</span><br><span class="line">    connect(pre,SIGNAL(changeLang(int)),this,SLOT(changeLang(int)));</span><br><span class="line">    connect(pre,SIGNAL(setTabsClosableSignal(bool)),this,SLOT(setTabsClosable(bool)));</span><br><span class="line">    connect(pre,SIGNAL(setTabsMovableSignal(bool)),this,SLOT(setTabsMovable(bool)));</span><br><span class="line">    connect(pre,SIGNAL(setTabPositionSignal(int)),this,SLOT(setTabPosition(int)));</span><br><span class="line">    connect(pre,SIGNAL(setTabShapeSignal(int)),this,SLOT(setTabShape(int)));</span><br><span class="line">    connect(pre,SIGNAL(setTextColorSignal(QRgb)),this,SLOT(setTextColor(QRgb)));</span><br><span class="line">    connect(pre,SIGNAL(setTextbgcolorSignal(QRgb)),this,SLOT(setTextbgcolor(QRgb)));</span><br><span class="line">    connect(pre,SIGNAL(setbgcolorSignal(QRgb)),this,SLOT(setbgcolor(QRgb)));</span><br><span class="line">    connect(pre,SIGNAL(setcurRowColorSignal(QRgb)),this,SLOT(setcurRowColor(QRgb)));</span><br><span class="line">    connect(pre,SIGNAL(setThemeSignal(int)),this,SLOT(setWindowTheme(int)));</span><br><span class="line">    connect(pre,SIGNAL(newFileNameSignal(QString&amp;)),this,SLOT(setNewFileName(QString&amp;)));</span><br><span class="line">    connect(pre,SIGNAL(newFileSuffixSignal(QString&amp;)),this,SLOT(setNewFileSuffix(QString&amp;)));</span><br><span class="line">    pre-&gt;sendSignal();</span><br><span class="line">    // checked解决在启动主程序时就自动运行Preference读取设置且不显示对话框</span><br><span class="line">    // 只有在菜单栏点击后才显示对话框</span><br><span class="line">    <span class="keyword">if</span>(checked)&#123;</span><br><span class="line">        ui-&gt;action_Preference-&gt;setChecked(<span class="literal">false</span>);</span><br><span class="line">        pre-&gt;show();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        pre-&gt;deleteLater();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>读入文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">setting = new QSettings(QCoreApplication::applicationDirPath()+<span class="string">"/config.ini"</span>, QSettings::IniFormat); // ini文件</span><br><span class="line">readSetting();</span><br></pre></td></tr></table></figure>
<p>声明私有变量：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">private:</span><br><span class="line">    Ui::Setting *ui;</span><br><span class="line">    QSettings *setting;</span><br><span class="line">    QButtonGroup *setTabPosBtnGroup, *setTabShapeBtnGroup;</span><br><span class="line">    QRgb textColor, currentRowColor, backgroundColor, textBackgroundColor;</span><br><span class="line">    bool isModified;</span><br><span class="line">    void InitRadioButton();</span><br><span class="line">    void readSettings();</span><br><span class="line">    void sendSignal();</span><br><span class="line">    int lang, theme;</span><br><span class="line">    int showMenu,showToolBar, showStatusBar;</span><br><span class="line">    QString newFileName, newFileSuffix;</span><br><span class="line">    int setTabsMovable, setTabsClosable, tabPosition, tabShape;</span><br></pre></td></tr></table></figure>
<p>读取值</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void Setting::<span class="function"><span class="title">readSetting</span></span>()&#123;</span><br><span class="line">    QStringList all = setting-&gt;childGroups();</span><br><span class="line">    // 读取第一组数据</span><br><span class="line">    setting-&gt;beginGroup(all[0]);</span><br><span class="line">    lang = setting-&gt;value(<span class="string">"Language"</span>).toInt();</span><br><span class="line">    showMenu = setting-&gt;value(<span class="string">"ShowMainWindowMenu"</span>).toInt();</span><br><span class="line">    showToolBar = setting-&gt;value(<span class="string">"ShowMainWindowToolBar"</span>).toInt();</span><br><span class="line">    showStatusBar = setting-&gt;value(<span class="string">"ShowMainWindowStatusBar"</span>).toInt();</span><br><span class="line">    theme = setting-&gt;value(<span class="string">"Theme"</span>).toInt();</span><br><span class="line">    setting-&gt;endGroup();</span><br><span class="line">    // 更新选项</span><br><span class="line">    ui-&gt;comboBox_2-&gt;setCurrentIndex(lang);</span><br><span class="line">    ui-&gt;cb_showMainMenu-&gt;setCheckState(Qt::CheckState(showMenu));</span><br><span class="line">    ui-&gt;cb_showToolBar-&gt;setCheckState(Qt::CheckState(showToolBar));</span><br><span class="line">    ui-&gt;cb_showStatusBar-&gt;setCheckState(Qt::CheckState(showStatusBar));</span><br><span class="line">    ui-&gt;cb_theme-&gt;setCurrentIndex(theme);</span><br><span class="line"></span><br><span class="line">    // 读取第二组数据</span><br><span class="line">    setting-&gt;beginGroup(all[1]);</span><br><span class="line">    newFileName = setting-&gt;value(<span class="string">"NewFileName"</span>).toString();</span><br><span class="line">    newFileSuffix = setting-&gt;value(<span class="string">"NewFileSuffix"</span>).toString();</span><br><span class="line">    textColor = setting-&gt;value(<span class="string">"textColor"</span>).toInt();</span><br><span class="line">    currentRowColor = setting-&gt;value(<span class="string">"currentRowColor"</span>).toInt();</span><br><span class="line">    backgroundColor = setting-&gt;value(<span class="string">"backgroundColor"</span>).toInt();</span><br><span class="line">    textBackgroundColor = setting-&gt;value(<span class="string">"textBackgroundColor"</span>).toInt();</span><br><span class="line">    setTabsMovable = setting-&gt;value(<span class="string">"setTabsMovable"</span>).toInt();</span><br><span class="line">    setTabsClosable = setting-&gt;value(<span class="string">"setTabsClosable"</span>).toInt();</span><br><span class="line">    tabPosition = setting-&gt;value(<span class="string">"TabPosition"</span>).toInt();</span><br><span class="line">    tabShape = setting-&gt;value(<span class="string">"TabShape"</span>).toInt();</span><br><span class="line">    setting-&gt;endGroup();</span><br><span class="line">	// 更新单选框</span><br><span class="line">    switch (tabPosition) &#123;</span><br><span class="line">    <span class="keyword">case</span> -2:</span><br><span class="line">        ui-&gt;rb_north-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span> -3:</span><br><span class="line">        ui-&gt;rb_south-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span> -4:</span><br><span class="line">        ui-&gt;rb_east-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span> -5:</span><br><span class="line">        ui-&gt;rb_west-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    switch (tabShape) &#123;</span><br><span class="line">    <span class="keyword">case</span> -2:</span><br><span class="line">        ui-&gt;rb_Rounded-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span> -3:</span><br><span class="line">        ui-&gt;rb_Triangular-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>设置主窗口状态为.ini读入的设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void Setting::<span class="function"><span class="title">sendSignal</span></span>()&#123;</span><br><span class="line">    emit changeLang(lang);</span><br><span class="line">    emit showMainMenuSignal(showMenu);</span><br><span class="line">    emit showToolBarSignal(showToolBar);</span><br><span class="line">    emit showStatusBarSignal(showStatusBar);</span><br><span class="line">    emit setThemeSignal(theme);</span><br><span class="line"></span><br><span class="line">    emit newFileNameSignal(newFileName);</span><br><span class="line">    emit newFileSuffixSignal(newFileSuffix);</span><br><span class="line">    emit setTabsMovableSignal(setTabsMovable);</span><br><span class="line">    emit setTabsClosableSignal(setTabsClosable);</span><br><span class="line">    emit setTabPositionSignal(tabPosition);</span><br><span class="line">    emit setTabShapeSignal(tabShape);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>保存设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">void Setting::on_buttonBox_accepted()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(isModified)&#123;</span><br><span class="line">        setting-&gt;clear();</span><br><span class="line">        setting-&gt;beginGroup(<span class="string">"Environment"</span>);</span><br><span class="line">        setting-&gt;setValue(<span class="string">"Language"</span>, ui-&gt;comboBox_2-&gt;currentIndex());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"ShowMainWindowMenu"</span>, ui-&gt;cb_showMainMenu-&gt;checkState());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"ShowMainWindowToolBar"</span>, ui-&gt;cb_showToolBar-&gt;checkState());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"ShowMainWindowStatusBar"</span>, ui-&gt;cb_showStatusBar-&gt;checkState());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"Theme"</span>, ui-&gt;cb_theme-&gt;currentIndex());</span><br><span class="line">        setting-&gt;endGroup();</span><br><span class="line">        setting-&gt;beginGroup(<span class="string">"textEditor"</span>);</span><br><span class="line">        setting-&gt;setValue(<span class="string">"NewFileName"</span>, ui-&gt;le_newFileName-&gt;text());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"NewFileSuffix"</span>, ui-&gt;le_newFileSuffix-&gt;text());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"textColor"</span>, textColor);</span><br><span class="line">        setting-&gt;setValue(<span class="string">"currentRowColor"</span>, currentRowColor);</span><br><span class="line">        setting-&gt;setValue(<span class="string">"backgroundColor"</span>, backgroundColor);</span><br><span class="line">        setting-&gt;setValue(<span class="string">"textBackgroundColor"</span>, textBackgroundColor);</span><br><span class="line">        setting-&gt;setValue(<span class="string">"setTabsMovable"</span>, ui-&gt;cb_setTabsMovable-&gt;checkState());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"setTabsClosable"</span>, ui-&gt;cb_setTabsClosable-&gt;checkState());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"setTabsMovable"</span>, ui-&gt;cb_setTabsMovable-&gt;checkState());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"TabPosition"</span>, setTabPosBtnGroup-&gt;checkedId());</span><br><span class="line">        setting-&gt;setValue(<span class="string">"TabShape"</span>, setTabShapeBtnGroup-&gt;checkedId());</span><br><span class="line">        setting-&gt;endGroup();</span><br><span class="line">    &#125;</span><br><span class="line">    this-&gt;close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt配置文件</tag>
      </tags>
  </entry>
  <entry>
    <title>qt中设置Qlabel的背景色</title>
    <url>/2019/12/05/2019-12-5-qt-setting-value/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Qlabel背景色与QButtonGroup</p>
<a id="more"></a>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">QColor color;</span><br><span class="line"><span class="keyword">if</span>(color.isValid())&#123;</span><br><span class="line">	ui-&gt;lb_textbgcolor-&gt;clear();</span><br><span class="line">	QRgb col = color.rgb();</span><br><span class="line">	QPalette plt;</span><br><span class="line">	plt.setColor(QPalette::Background, QColor(col));</span><br><span class="line">	ui-&gt;lb_textbgcolor-&gt;setAutoFillBackground(<span class="literal">true</span>);  //一定要这句，否则不行</span><br><span class="line">	ui-&gt;lb_textbgcolor-&gt;setPalette(plt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>QRadioButton与QButtonGroup</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">setTabPosBtnGroup = new QButtonGroup(this);</span><br><span class="line">setTabPosBtnGroup-&gt;addButton(ui-&gt;rb_north);</span><br><span class="line">setTabPosBtnGroup-&gt;addButton(ui-&gt;rb_south);</span><br><span class="line">setTabPosBtnGroup-&gt;addButton(ui-&gt;rb_east);</span><br><span class="line">setTabPosBtnGroup-&gt;addButton(ui-&gt;rb_west);</span><br><span class="line">connect(setTabPosBtnGroup,SIGNAL(buttonClicked(int)),this,SLOT(setTabPosition(int)));</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt QSetting</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt怎么实现设置窗口的的布局</title>
    <url>/2019/12/04/2019-12-4-qt-settings-layout/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>设置窗口包含多个界面，采用合适的布局会更美观。</p>
<a id="more"></a>
<h4 id="总体布局"><a href="#总体布局" class="headerlink" title="总体布局"></a>总体布局</h4><p>设置左边为列表窗口<code>leftWidget(QListWidget)</code>，展示多个总分类，右边是栈窗口<code>rightStack(QStackedWidget)</code>，根据左边的选择展示对应<code>index</code>的窗口.<br>当然窗口少不了的两个按钮–确认和取消也放在右边，和栈窗口组成上下结构。<br>总体布局便是左，右上，右下。用代码实现</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// pre指向设置对话框对象</span><br><span class="line">QDialog *pre = new QDialog(this);</span><br><span class="line">pre-&gt;setGeometry(this-&gt;x(),this-&gt;y()+this-&gt;height()/4,500,400);</span><br><span class="line">// 采用左，右上，右下布局</span><br><span class="line">QHBoxLayout *mainLayout = new  QHBoxLayout(pre);</span><br><span class="line">QHBoxLayout *leftLayout = new QHBoxLayout;</span><br><span class="line">QVBoxLayout *rightLayout = new QVBoxLayout;</span><br><span class="line">mainLayout-&gt;addLayout(leftLayout,1);//设置左侧list所占的宽度</span><br><span class="line">mainLayout-&gt;addLayout(rightLayout,5);</span><br><span class="line">mainLayout-&gt;setSpacing(2);</span><br><span class="line">pre-&gt;setLayout(mainLayout);</span><br></pre></td></tr></table></figure>
<h4 id="左侧布局"><a href="#左侧布局" class="headerlink" title="左侧布局"></a>左侧布局</h4><p>左侧包括两个选项</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">leftWidget = new QListWidget;</span><br><span class="line">leftWidget-&gt;insertItem(0, tr(<span class="string">"Environment"</span>));</span><br><span class="line">leftWidget-&gt;insertItem(1, tr(<span class="string">"Editor"</span>));</span><br><span class="line">leftLayout-&gt;addWidget(leftWidget);</span><br></pre></td></tr></table></figure>
<h4 id="右侧窗口类设计"><a href="#右侧窗口类设计" class="headerlink" title="右侧窗口类设计"></a>右侧窗口类设计</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">class EnvironmentPage : public QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">public:</span><br><span class="line">    explicit EnvironmentPage(QSettings *settings, QWidget *parent);</span><br><span class="line">protected:</span><br><span class="line">    QWidget *SetFontLayout();</span><br><span class="line">    QWidget *SetLangLayout();</span><br><span class="line">    QSettings *setting;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="右侧布局"><a href="#右侧布局" class="headerlink" title="右侧布局"></a>右侧布局</h4><p>右上侧布局</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rightStack = new QStackedWidget;</span><br><span class="line">EnvironmentPage *environment = new EnvironmentPage(setting, pre);</span><br><span class="line">EditorPage *editor = new EditorPage(setting, pre);</span><br><span class="line">// 把两个窗口入栈</span><br><span class="line">rightStack-&gt;addWidget(environment);</span><br><span class="line">rightStack-&gt;addWidget(editor);</span><br></pre></td></tr></table></figure>
<p>右下侧布局</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rightBottom = new QWidget;</span><br><span class="line">QDialogButtonBox env(rightBottom);</span><br><span class="line">env.addButton(QDialogButtonBox::Ok);env.addButton(QDialogButtonBox::Cancel);</span><br><span class="line">rightBottom-&gt;addActions(env.actions());</span><br></pre></td></tr></table></figure>
<p>右侧布局</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rightLayout-&gt;addWidget(rightStack);</span><br><span class="line">rightLayout-&gt;addWidget(rightBottom);</span><br><span class="line">rightLayout-&gt;setStretchFactor(rightStack,5);</span><br><span class="line">rightLayout-&gt;setStretchFactor(rightBottom,1);</span><br></pre></td></tr></table></figure>
<p>然后要把左侧列表选择事件与右侧对应窗口的显示对应起来并运行程序</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">connect(leftWidget, SIGNAL(currentRowChanged(int)), rightStack, SLOT(setCurrentIndex(int)));</span><br><span class="line">pre-&gt;<span class="built_in">exec</span>();</span><br></pre></td></tr></table></figure>

<h4 id="栈窗口内单个窗口的布局"><a href="#栈窗口内单个窗口的布局" class="headerlink" title="栈窗口内单个窗口的布局"></a>栈窗口内单个窗口的布局</h4><p>由于一个窗口对应多个分类，故使用选项卡窗口<code>tabWidget</code><br>一个窗口的总布局如下,其中包含font和lang两个tab页面，分别用两个函数实现</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">EnvironmentPage::EnvironmentPage(QSettings *settings, QWidget *parent)&#123;</span><br><span class="line">setting = settings;</span><br><span class="line">QGridLayout *mainLayout = new QGridLayout(this);</span><br><span class="line">QTabWidget *tab = new QTabWidget(this);</span><br><span class="line">QWidget *font = SetFontLayout();</span><br><span class="line">QWidget *lang = SetLangLayout();</span><br><span class="line"></span><br><span class="line">tab-&gt;addTab(font,tr(<span class="string">"Font"</span>));</span><br><span class="line">tab-&gt;addTab(lang,tr(<span class="string">"Language"</span>));</span><br><span class="line">mainLayout-&gt;addWidget(tab);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>font页面</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 设置font页面的布局</span><br><span class="line">QWidget *EnvironmentPage::<span class="function"><span class="title">SetFontLayout</span></span>()&#123;</span><br><span class="line">    QWidget *font = new QWidget;</span><br><span class="line">    // 分组</span><br><span class="line">    QGroupBox *box = new QGroupBox(tr(<span class="string">"font"</span>), font);</span><br><span class="line">    // 总布局</span><br><span class="line">    QVBoxLayout *vLayout = new QVBoxLayout(box);</span><br><span class="line">    // 行内布局</span><br><span class="line">    QHBoxLayout *hLayout = new QHBoxLayout;</span><br><span class="line">    QLabel *lb_font = new QLabel(tr(<span class="string">"Font:"</span>));</span><br><span class="line">    QSpinBox *sp_font = new QSpinBox;</span><br><span class="line">    hLayout-&gt;addWidget(lb_font);</span><br><span class="line">    hLayout-&gt;addWidget(sp_font);</span><br><span class="line">    vLayout-&gt;addLayout(hLayout);</span><br><span class="line">    vLayout-&gt;addStretch(1);</span><br><span class="line">    <span class="built_in">return</span> font;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>lang页面</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">QWidget *EnvironmentPage::<span class="function"><span class="title">SetLangLayout</span></span>()&#123;</span><br><span class="line">    QWidget *lang = new QWidget;</span><br><span class="line">    QGroupBox *box = new QGroupBox(tr(<span class="string">"lang"</span>), lang);</span><br><span class="line">    // 总布局</span><br><span class="line">    QVBoxLayout *vLayout = new QVBoxLayout(box);</span><br><span class="line">    // 行内布局</span><br><span class="line">    QHBoxLayout *hLayout = new QHBoxLayout;</span><br><span class="line">    QLabel *lb_lang = new QLabel(tr(<span class="string">"Language:"</span>));</span><br><span class="line">    QComboBox *langbox = new QComboBox;</span><br><span class="line">    langbox-&gt;addItem(tr(<span class="string">"Chinese"</span>));</span><br><span class="line">    langbox-&gt;addItem(tr(<span class="string">"English"</span>));</span><br><span class="line">    hLayout-&gt;addWidget(lb_lang);</span><br><span class="line">    hLayout-&gt;addWidget(langbox);</span><br><span class="line">    vLayout-&gt;addLayout(hLayout);</span><br><span class="line">    vLayout-&gt;addStretch(1);</span><br><span class="line">    <span class="built_in">return</span> lang;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样完成之后的窗口布局如下图：<br><img src="https://i.loli.net/2019/12/04/aXHs1jOJuZRoFhV.png" alt="main.png"></p>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt窗口布局</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt选项卡窗口实现查找替换</title>
    <url>/2019/12/02/2019-12-2-qt-tabWidget-find-replace/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>查找与替换是存在共同之处的功能，可以将他们放在一个选项卡窗口下</p>
<a id="more"></a>
<h4 id="findtext设计replaceSignal信号"><a href="#findtext设计replaceSignal信号" class="headerlink" title="findtext设计replaceSignal信号"></a>findtext设计replaceSignal信号</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">signals:</span><br><span class="line">	// 第一个参数为要查找的,第二个为替换目标</span><br><span class="line">    void replaceSignal(const QString &amp;, const QString &amp;);</span><br></pre></td></tr></table></figure>
<p>在<code>findText.cpp</code>发送信号</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void findText::<span class="function"><span class="title">emitReplaceSignal</span></span>()&#123;</span><br><span class="line">    QString string = ui-&gt;lineEdit_2-&gt;text();</span><br><span class="line">    QString replaceStr = ui-&gt;lineEdit_3-&gt;text();</span><br><span class="line">    <span class="keyword">if</span>(!string.isEmpty() &amp;&amp; !replaceStr.isEmpty())&#123;</span><br><span class="line">        emit replaceSignal(string, replaceStr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="主窗口设计接受信号槽"><a href="#主窗口设计接受信号槽" class="headerlink" title="主窗口设计接受信号槽"></a>主窗口设计接受信号槽</h4><p>在<code>MainWindow.h</code>声明接受信号槽</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">private slots:</span><br><span class="line">	void StartReplace(const QString&amp;, const QString&amp;);</span><br></pre></td></tr></table></figure>
<p>在<code>MainWindow.cpp</code>内以<code>FindDlg(int choice)</code>处理查找替换两种功能</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 打开查找对话框</span><br><span class="line">void MainWindow::Find(bool)&#123;</span><br><span class="line">    FindDlg(0);</span><br><span class="line">&#125;</span><br><span class="line">void MainWindow::Find_Replace(bool)&#123;</span><br><span class="line">    FindDlg(1);</span><br><span class="line">&#125;</span><br><span class="line">void MainWindow::FindDlg(int choice)&#123;</span><br><span class="line">    findtext = new findText(this, choice);</span><br><span class="line">    // 接受来自findtext发过来的信号serachsignal，replaceSignal</span><br><span class="line">    connect(findtext, SIGNAL(searchSignal(const QString&amp;, bool, bool, bool)),</span><br><span class="line">            this, SLOT(StartSearch(const QString&amp;, bool, bool, bool)));</span><br><span class="line">    connect(findtext, SIGNAL(replaceSignal(const QString&amp;, const QString&amp;)),</span><br><span class="line">            this,SLOT(StartReplace(const QString&amp;, const QString&amp;)));</span><br><span class="line">    activeEditor()-&gt;moveCursor(QTextCursor::Start);</span><br><span class="line">    findtext-&gt;show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>findtext.cpp</code>构造函数内进行选项卡的对应</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(choice == 0)&#123; //Find</span><br><span class="line">	ui-&gt;tabWidget-&gt;setCurrentIndex(0);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(choice == 1)&#123; //Find&amp;Replace</span><br><span class="line">	ui-&gt;tabWidget-&gt;setCurrentIndex(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>开始替换</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void MainWindow::StartReplace(const QString &amp;data, const QString &amp;replaceStr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!activeEditor())&#123;</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    QTextCursor cursor = activeEditor()-&gt;textCursor();</span><br><span class="line">    <span class="keyword">if</span>(cursor.hasSelection() &amp;&amp; cursor.selectedText() == data)&#123;</span><br><span class="line">        cursor.removeSelectedText();</span><br><span class="line">        cursor.insertText(replaceStr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt文本替换</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt-QTextEdit在文本被编辑时改变窗口图标</title>
    <url>/2019/12/01/2019-12-1-qt-textchanged-changeWindowIcon/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在多文档编辑窗口<code>QMdiArea(ui-&gt;mdiArea)</code>内怎么实现文档被编辑时改变窗口图标以提示文档被编辑</p>
<a id="more"></a>
<h4 id="文档被编辑时"><a href="#文档被编辑时" class="headerlink" title="文档被编辑时"></a>文档被编辑时</h4><p>添加<code>connect()</code>函数把文档编辑与相应处理槽联系起来</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void MainWindow::addEditor(textEditor *editor)&#123;</span><br><span class="line">	connect(editor,SIGNAL(textChanged()),this, SLOT(changeIcon()));</span><br><span class="line">	QMdiSubWindow *subWindow = ui-&gt;mdiArea-&gt;addSubWindow(editor);</span><br><span class="line">	subWindow-&gt;activateWindow();</span><br><span class="line">	subWindow-&gt;show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设计文档被编辑处理槽</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 在文本内容改变时设置当前活动窗口图标为感叹号图标</span><br><span class="line">void MainWindow::<span class="function"><span class="title">changeIcon</span></span>()&#123;</span><br><span class="line">    ui-&gt;mdiArea-&gt;activeSubWindow()-&gt;setWindowIcon(QIcon(<span class="string">":/images/fm"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="文档被保存时"><a href="#文档被保存时" class="headerlink" title="文档被保存时"></a>文档被保存时</h4><p>当然有改变当然也有变回去的，当文档被保存后，<br>文档的状态改为未被编辑，此时文档的图标应该回到正常图标<code>:/images/fl</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 保存文件</span><br><span class="line">void MainWindow::Save(bool)&#123;</span><br><span class="line">    // 在新建文件保存时打开了一个对话框会改变当前活动窗口的地址，故先保存下来</span><br><span class="line">    QMdiSubWindow *activeSubWin = ui-&gt;mdiArea-&gt;activeSubWindow();</span><br><span class="line">    <span class="keyword">if</span>(activeEditor())&#123;</span><br><span class="line">        <span class="keyword">if</span>(activeEditor()-&gt;save())&#123;</span><br><span class="line">            // 保存文件后去掉文本已修改图标</span><br><span class="line">            activeSubWin-&gt;setWindowIcon(QIcon(<span class="string">":/images/fl"</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            QMessageBox::warning(this,tr(<span class="string">"warning"</span>), tr(<span class="string">"write to %1 file failed"</span>)</span><br><span class="line">                                 .arg(activeEditor()-&gt;getCurrentFile()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 保存所有文件</span><br><span class="line">void MainWindow::SaveAll(bool)&#123;</span><br><span class="line">    QList&lt;QMdiSubWindow *&gt;windows = ui-&gt;mdiArea-&gt;subWindowList();</span><br><span class="line">    QMdiSubWindow *activeSubWin;</span><br><span class="line">    // 遍历各个子窗口</span><br><span class="line">    <span class="keyword">for</span>(int i=0; i&lt;windows.size();++i)&#123;</span><br><span class="line">        textEditor *child = qobject_cast&lt;textEditor *&gt;(windows.at(i)-&gt;widget());</span><br><span class="line">        activeSubWin = ui-&gt;mdiArea-&gt;subWindowList().at(i);</span><br><span class="line">        <span class="keyword">if</span>(child-&gt;save())&#123;</span><br><span class="line">            activeSubWin-&gt;setWindowIcon(QIcon(<span class="string">":/images/fl"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 另存为</span><br><span class="line">void MainWindow::SaveAs(bool)&#123;</span><br><span class="line">    QMdiSubWindow *activeSubWin = ui-&gt;mdiArea-&gt;activeSubWindow();</span><br><span class="line">    <span class="keyword">if</span>(activeEditor())&#123;</span><br><span class="line">        <span class="keyword">if</span>(activeEditor()-&gt;saveAS())&#123;</span><br><span class="line">            activeSubWin-&gt;setWindowIcon(QIcon(<span class="string">":/images/fl"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt-changeWindowIcon</tag>
      </tags>
  </entry>
  <entry>
    <title>非模态查找对话框与主窗口的通信</title>
    <url>/2019/12/01/2019-12-1-qt-findDlg-nonmodal/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>如何实现非模态查找对话框与主窗口的通信来达到查找的目的</p>
<a id="more"></a>
<h4 id="主窗口设计接受信号槽"><a href="#主窗口设计接受信号槽" class="headerlink" title="主窗口设计接受信号槽"></a>主窗口设计接受信号槽</h4><p>在<code>MainWindow.h</code>声明接受信号槽</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">private slots:</span><br><span class="line">	void StartSearch(const QString &amp;data, bool cs, bool forward);</span><br></pre></td></tr></table></figure>
<p>在<code>MainWindow.cpp</code>主窗口函数内以非模态运行对话框</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void MainWindow::Find(bool)&#123;</span><br><span class="line">	findtext = new findText(this);</span><br><span class="line">	// this窗口的StartSearch函数接受来自findtext发过来的信号serachsignal的参数</span><br><span class="line">	// serachsignal内的参数实现了两个窗口间的通信</span><br><span class="line">	connect(findtext, SIGNAL(searchSignal(const QString&amp;, bool, bool)),</span><br><span class="line">			this, SLOT(StartSearch(const QString&amp;, bool, bool)));</span><br><span class="line">	// 当前活动窗口(QTextEdit)鼠标指针置于起始位置</span><br><span class="line">	activeEditor()-&gt;moveCursor(QTextCursor::Start);</span><br><span class="line">	// 没有设置Qt::WindowModality属性值则show()-非模态,</span><br><span class="line">	// open()-半模态,<span class="built_in">exec</span>()-模态，阻塞父窗口</span><br><span class="line">	findtext-&gt;show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接受信号槽函数设计</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void MainWindow::StartSearch(const QString &amp;data, bool cs, bool forward)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!activeEditor())&#123;</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    bool isfind;</span><br><span class="line">    // cs为真，匹配大小写</span><br><span class="line">    <span class="keyword">if</span>(cs)&#123;</span><br><span class="line">        // 如果forward为真，向前查找</span><br><span class="line">        <span class="keyword">if</span>(forward)&#123;</span><br><span class="line">            isfind = activeEditor()-&gt;find(data,QTextDocument::FindCaseSensitively);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            isfind = activeEditor()-&gt;find(data, QTextDocument::FindBackward | QTextDocument::FindCaseSensitively);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(forward)&#123;</span><br><span class="line">            isfind = activeEditor()-&gt;find(data);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            isfind = activeEditor()-&gt;find(data,QTextDocument::FindBackward);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(isfind)&#123;</span><br><span class="line">         // 查找到后高亮显示</span><br><span class="line">         QPalette palette= activeEditor()-&gt;palette();</span><br><span class="line">         palette.setColor(QPalette::Highlight,palette.color(QPalette::Active,QPalette::Highlight));</span><br><span class="line">         activeEditor()-&gt;setPalette(palette);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="findtext设计searchSignal信号"><a href="#findtext设计searchSignal信号" class="headerlink" title="findtext设计searchSignal信号"></a>findtext设计searchSignal信号</h4><p>在<code>findText.h</code>声明信号：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void searchSignal(const QString &amp;, bool, bool);</span><br></pre></td></tr></table></figure>
<p>在<code>findText.cpp</code>发送信号</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">void findText::emitSearchSignal()</span><br><span class="line">&#123;</span><br><span class="line">    QString string = ui-&gt;lineEdit-&gt;text();</span><br><span class="line">    // cs-&gt;匹配大小写，fw向前查找</span><br><span class="line">    bool cs = ui-&gt;checkBox-&gt;isChecked()?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">    bool fw = ui-&gt;checkBox_2-&gt;isChecked()?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!string.isEmpty())&#123;</span><br><span class="line">		// 发送信号</span><br><span class="line">        emit searchSignal(string, cs, fw);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt对话框通信</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt如何创建一个函数调用时创建调用完销毁的临时对话框</title>
    <url>/2019/11/30/2019-11-30-qt-new-temporary-dialog/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Qt在对话框内容较少时可不使用qt设计师类而是在函数调用时新建一个临时对话框</p>
<a id="more"></a>
<h4 id="首先新建一个Dialog对象及指向此对象指针"><a href="#首先新建一个Dialog对象及指向此对象指针" class="headerlink" title="首先新建一个Dialog对象及指向此对象指针"></a>首先新建一个Dialog对象及指向此对象指针</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">QDialog *tabledlg = new QDialog(this);</span><br><span class="line">tabledlg-&gt;setGeometry(QRect(this-&gt;x()*3/2,this-&gt;y()*3/2,300,300));</span><br></pre></td></tr></table></figure>
<h4 id="加入控件"><a href="#加入控件" class="headerlink" title="加入控件"></a>加入控件</h4><p>加入数字输入框</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">QSpinBox cellSpacing(tabledlg), cellPadding(tabledlg), rowNum(tabledlg), colNum(tabledlg);</span><br><span class="line">cellSpacing.setGeometry(QRect(120,20,100,20));cellPadding.setGeometry(QRect(120,50,100,20));</span><br><span class="line">rowNum.setGeometry(QRect(120,80,100,20));colNum.setGeometry(QRect(120,110,100,20));</span><br></pre></td></tr></table></figure>
<p>一个对话框必不可少的是确认和取消按钮，有两种方法添加</p>
<ol>
<li>使用QDialogButtonBox类<br>QDialogButtonBox类包含一个对话框所有的系统自带的默认按钮类型，使用方法如下：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 新建并指定父窗口为tabledlg</span><br><span class="line">QDialogButtonBox buttonBox(tabledlg);</span><br><span class="line">// 添加确认和取消按钮</span><br><span class="line">buttonBox.addButton(QDialogButtonBox::Ok);</span><br><span class="line">buttonBox.addButton(QDialogButtonBox::Cancel);</span><br><span class="line">// 设置位置</span><br><span class="line">buttonBox.setGeometry(QRect(60,160,120,20));</span><br><span class="line">// 将两个按钮的点击信号分别与对话框的两个槽函数accept和reject联系起来</span><br><span class="line">connect(buttonBox.button(QDialogButtonBox::Ok),SIGNAL(clicked(bool)),tabledlg,SLOT(accept()));</span><br><span class="line">connect(buttonBox.button(QDialogButtonBox::Cancel),SIGNAL(clicked(bool)),tabledlg,SLOT(reject()));</span><br></pre></td></tr></table></figure></li>
<li>使用QPushButton类<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">QPushButton btn_ok(<span class="string">"Ok"</span>,tabledlg), btn_cancel(<span class="string">"Cancel"</span>, tabledlg);</span><br><span class="line">btn_ok.setGeometry(QRect(60,160,60,20));</span><br><span class="line">btn_cancel.setGeometry(QRect(130,160,60,20));</span><br><span class="line">// 同上</span><br><span class="line">connect(&amp;btn_ok,SIGNAL(clicked()),tabledlg,SLOT(accept()));</span><br><span class="line">connect(&amp;btn_cancel,SIGNAL(clicked()),tabledlg,SLOT(reject()));</span><br></pre></td></tr></table></figure>
<h4 id="获得对话框的输入框value以达到和主窗口通信的目的"><a href="#获得对话框的输入框value以达到和主窗口通信的目的" class="headerlink" title="获得对话框的输入框value以达到和主窗口通信的目的"></a>获得对话框的输入框value以达到和主窗口通信的目的</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int cs, cp, rn, cn;</span><br><span class="line"><span class="keyword">if</span>(tabledlg-&gt;<span class="built_in">exec</span>() == QDialog::Accepted)&#123;</span><br><span class="line">	cs = cellSpacing.value(), cp=cellPadding.value(), rn=rowNum.value(), cn=colNum.value();</span><br><span class="line">	QTextCursor cursor = activeEditor()-&gt;textCursor();</span><br><span class="line">	QTextTableFormat format;           // 表格格式</span><br><span class="line">	format.setCellSpacing(cs);         // 表格外边白</span><br><span class="line">	format.setCellPadding(cp);         // 表格内边白</span><br><span class="line">	cursor.insertTable(rn, cn, format);// 插入rn行cn列表格</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="built_in">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
参考<br>[1].<a href="https://zhidao.baidu.com/question/561199373.html" target="_blank" rel="noopener">qt中如何临时的定义一个Qdialog的实例，然后进行操作</a></li>
</ol>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>qt临时对话框</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt实现中英文切换</title>
    <url>/2019/11/29/2019-11-29-qt-multi-language/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><a id="more"></a>
<ol>
<li>在代码中将需要进行翻译的部分用<code>tr()</code>函数包裹起来。</li>
<li>在项目配置文件<code>*.pro</code>中加上<code>TRANSLATIONS = en_US.ts zh_CN.ts</code></li>
<li>在菜单栏<code>工具</code>-&gt;<code>外部</code>-&gt;<code>Qt语言家</code>-&gt;<code>更新翻译</code>，运行lupdate工具，这是会生成.ts文件</li>
<li>在菜单栏<code>文件</code>-&gt;<code>打开文件，用..</code>选择.ts文件，完成翻译工作</li>
<li>在菜单栏<code>工具</code>-&gt;<code>外部</code>-&gt;<code>Qt语言家</code>-&gt;<code>发布翻译</code>，运行lrelease工具，这是会生成.qm文件</li>
</ol>
<h3 id="根据当前的区域设置自动选择语言包-main-cpp"><a href="#根据当前的区域设置自动选择语言包-main-cpp" class="headerlink" title="根据当前的区域设置自动选择语言包(main.cpp)"></a>根据当前的区域设置自动选择语言包(main.cpp)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">QApplication a(argc, argv);</span><br><span class="line">QString locale = QLocale::system().name();</span><br><span class="line">QTranslator *translator = new QTranslator(&amp;a);</span><br><span class="line">// 会在当前目录下的lang目录下寻找，可以不带<span class="string">".qm"</span>后缀名</span><br><span class="line">translator-&gt;load(QCoreApplication::applicationDirPath() + QString(<span class="string">"/lang/"</span> + locale));</span><br><span class="line">a.installTranslator(translator);   // 安装翻译器</span><br></pre></td></tr></table></figure>
<h3 id="函数实现动态切换-MainWindow-cpp"><a href="#函数实现动态切换-MainWindow-cpp" class="headerlink" title="函数实现动态切换(MainWindow.cpp)"></a>函数实现动态切换(MainWindow.cpp)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 语言设置</span><br><span class="line">void MainWindow::en_US(bool)&#123;</span><br><span class="line">    static QTranslator *translator;</span><br><span class="line">    <span class="keyword">if</span>(translator != NULL)&#123;</span><br><span class="line">        qApp-&gt;removeTranslator(translator);</span><br><span class="line">        delete translator;</span><br><span class="line">        translator = NULL;</span><br><span class="line">    &#125;</span><br><span class="line">    translator = new QTranslator(this);</span><br><span class="line">	// QCoreApplication::applicationDirPath() 获取当前运行程序的路径</span><br><span class="line">	// 而QDir::currentPath()只能获取当前程序运行路径的上一级路径</span><br><span class="line">    <span class="keyword">if</span>(translator-&gt;load( QCoreApplication::applicationDirPath() + <span class="string">"/lang/en_US.qm"</span>))&#123;</span><br><span class="line">        qDebug()&lt;&lt;<span class="string">"en_US"</span>&lt;&lt;endl;</span><br><span class="line">        qApp-&gt;installTranslator(translator);</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;retranslateUi(this); //这一句很重要，加载建立完translator后需要更新界面</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考资料<br><code>[1]</code><a href="https://blog.csdn.net/sinat_35523212/article/details/52348934" target="_blank" rel="noopener">Qt实现多国语言（即界面翻译）可实时进行切换</a><br><code>[2]</code><a href="https://blog.csdn.net/jays_/article/details/84401012" target="_blank" rel="noopener">QT实现多语言/动态切换（国际化）</a></p>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt多国语言切换</tag>
      </tags>
  </entry>
  <entry>
    <title>Qt5.9利用QSplashScreen实现程序启动动画</title>
    <url>/2019/11/29/2019-11-29-qt-add-start-gif/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>如何在程序加载完成之前让用户觉得你的程序不是卡死，从而提高用户体验呢？</p>
<a id="more"></a>
<h3 id="加载图片并延时-main-cpp"><a href="#加载图片并延时-main-cpp" class="headerlink" title="加载图片并延时(main.cpp)"></a>加载图片并延时(main.cpp)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;QApplication&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QPixmap&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QSplashScreen&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QDateTime&gt;</span></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">	QApplication a(argc, argv);</span><br><span class="line">	QPixmap pixmap(<span class="string">":/images/hh"</span>); //加载资源文件中的图片</span><br><span class="line">	QSplashScreen splash(pixmap); //利用图片创建一个QSplashScreen对象</span><br><span class="line">	splash.show(); //显示图片</span><br><span class="line">	QDateTime time = QDateTime::currentDateTime();</span><br><span class="line">	QDateTime currentTime = QDateTime::currentDateTime();   //记录当前时间</span><br><span class="line">	<span class="keyword">while</span> (time.secsTo(currentTime) &lt;= 5)                   //5为需要延时的秒数</span><br><span class="line">	&#123;</span><br><span class="line">		currentTime = QDateTime::currentDateTime();	</span><br><span class="line">		a.processEvents();  </span><br><span class="line">	&#125;</span><br><span class="line">	Dialoghome w;</span><br><span class="line">	w.show();</span><br><span class="line">	splash.finish(&amp;w);</span><br><span class="line">	<span class="built_in">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="开机加载GIF动图并延时-main-cpp"><a href="#开机加载GIF动图并延时-main-cpp" class="headerlink" title="开机加载GIF动图并延时(main.cpp)"></a>开机加载GIF动图并延时(main.cpp)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include &lt;QApplication&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QMovie&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QPixmap&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QLabel&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QSplashScreen&gt;</span></span><br><span class="line"><span class="comment">#include &lt;QDateTime&gt;                         //添加QDateTime头文件</span></span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">	QApplication a(argc, argv);</span><br><span class="line">	QPixmap pixmap(<span class="string">":/images/bg"</span>); //在动画的底层会显示这张图片</span><br><span class="line">	// 这里很重要,用透明色填充,这样就相当于加了一个透明背景而不是有色彩的背景</span><br><span class="line">	pixmap.fill(Qt::transparent);  //</span><br><span class="line">	QSplashScreen splash(pixmap);  //利用图片创建一个QSplashScreen对象</span><br><span class="line">	QMovie movie(<span class="string">":/images/hh"</span>);   //创建启动需要显示的图片</span><br><span class="line">	QLabel label(&amp;splash);</span><br><span class="line">	label.setMovie(&amp;movie);</span><br><span class="line">	movie.start();  //启动GIF</span><br><span class="line">	splash.show();  //显示图片</span><br><span class="line">	QDateTime time = QDateTime::currentDateTime();</span><br><span class="line">	QDateTime currentTime = QDateTime::currentDateTime();   //记录当前时间</span><br><span class="line">	<span class="keyword">while</span> (time.secsTo(currentTime) &lt;= 5)                   //5为需要延时的秒数</span><br><span class="line">	&#123;</span><br><span class="line">		currentTime = QDateTime::currentDateTime();</span><br><span class="line">		a.processEvents();      //使程序在显示启动画面的同时仍能响应鼠标其他事件</span><br><span class="line">	&#125;;</span><br><span class="line">	MainWindow w;</span><br><span class="line">	w.show();</span><br><span class="line">	splash.finish(&amp;w);  //在主窗体对象初始化完成后,结束启动画面</span><br><span class="line">	<span class="built_in">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考文章<br>[1]<a href="https://blog.csdn.net/TanChengkai/article/details/100578097" target="_blank" rel="noopener">Qt中通过Qpixmap设置图片透明度</a><br>[2]<a href="https://blog.csdn.net/wangyachao0803/article/details/82839101" target="_blank" rel="noopener">Qt QSplashScreen 开机加载图片和动图</a></p>
]]></content>
      <categories>
        <category>Qt</category>
      </categories>
      <tags>
        <tag>Qt开机动画</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Next主题侧边栏嵌入网易云音乐</title>
    <url>/2019/11/28/2019-11-28-hexo-add-wangyiyun-music/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>如何在你的博客中嵌入音乐播放器使你的博客看起来更丰富呢？</p>
<a id="more"></a>
<ol>
<li>首先进入网页版的网易云音乐找到你喜欢的歌曲<br><img src="https://i.loli.net/2019/11/28/U85rytsiGRAcCEI.png" alt="wangye.png"></li>
<li>在歌曲详情页点击<code>生成外链播放器</code><br><img src="https://i.loli.net/2019/11/28/gfsDPCmuL2XtbQ5.png" alt="dianji.png"></li>
<li>然后选择是否自动播放等一些选项后直接复制代码<br><img src="https://i.loli.net/2019/11/28/vwO7MLcFuo63Sbn.png" alt="fuzhi.png"></li>
<li>在根目录下的<code>/theme/next/layout/_macro/sidebar.swig</code>文件中选择你要添加播放器的位置，然后粘贴外链接。<br><img src="https://i.loli.net/2019/11/28/rEmndfiUkL75ya8.png" alt="niantie.png"></li>
<li>重新生成运行<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo 网易云音乐</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo+next增加不蒜子统计功能</title>
    <url>/2019/11/27/2019-11-27-hexo-add-busuanzi/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hexo增加不蒜子统计页面访问量、访问人数、及阅读数</p>
<a id="more"></a>
<p>编辑主题配置文件 <code>themes/next/_config.yml</code> 中的 <code>busuanzi_count</code>的配置项。<br>当enable: true时，代表开启全局开启。<br>若site_uv（本站访客数）、site_pv（本站访客数）、page_pv（本文总阅读量）的值均为false时，不蒜子仅作记录而不会在页面上显示。<br>我使用的是<code>nextV7.5.0</code>版本，该版本<code>\layout\_third-party\analytics</code>下没有<code>busuanzi-counter.swig</code>文件，而在<code>\layout\_third-party\statistics</code>目录下，复制粘贴到<code>analytics</code>目录下即可。<br>当你使用了<code>live2Dmod</code>在页面上时，不蒜子不能正常显示。</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo busuanzi</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo+next使用Valine评论系统</title>
    <url>/2019/11/27/2019-11-27-hexo-add-valine/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hexo+next使用Valine评论系统</p>
<a id="more"></a>
<ol>
<li>获取<code>APP ID</code> 和 <code>APP Key</code><br>登录或注册 <a href="https://leancloud.cn/" target="_blank" rel="noopener">LeanCloud</a> , 进入控制台后点击左下角创建应用，然后就能看到你的<code>APP ID</code>和<code>APP Key</code>了</li>
<li>打开_config.yml主题配置文件，搜索valine，填写<code>APP ID</code> 和 <code>APP Key</code>到对应位置。</li>
<li>在<code>LeanCloud</code> -&gt; <code>存储</code> -&gt; <code>创建Class</code> -&gt; <code>无限制的Class</code>，创建class名称为：Comment</li>
<li>在<code>LeanCloud</code> -&gt; <code>设置</code> -&gt; <code>安全中心</code>，把除<code>数据存储</code>外其他选项都关闭。</li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo valine</tag>
      </tags>
  </entry>
  <entry>
    <title>修改文章tag标签的样式</title>
    <url>/2019/11/27/2019-11-27-hexo-change-tag-style/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>修改文章tag标签的样式及文章底部添加本文结束标志</p>
<a id="more"></a>
<h3 id="修改tag样式"><a href="#修改tag样式" class="headerlink" title="修改tag样式"></a>修改tag样式</h3><p>打开<code>next/_config.yml</code>文件，查找<code>tag_icon: false</code>改为true即可</p>
<h3 id="添加结束标志"><a href="#添加结束标志" class="headerlink" title="添加结束标志"></a>添加结束标志</h3><p>打开编辑<code>themes\next\layout\_macro\post.swig</code>，在文章结束的地方添加如下代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">    &lt;div style=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;</span><br><span class="line">        ---------本文已结束---------</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo tag样式</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo生成博文插入图片</title>
    <url>/2019/11/27/2019-11-27-hexo-blog-add-image/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hexo生成博文插入图片</p>
<a id="more"></a>
<ol>
<li>把主页配置文件<code>_config.yml</code>里的<code>post_asset_folder:false</code>这个选项设置为<code>true</code></li>
<li>安装插件,这是下载安装一个可以上传本地图片的插件<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image -- save–save</span><br></pre></td></tr></table></figure></li>
<li>安装完成后，再运行<code>hexo n “title”</code>来生成md博文时，<br><code>/source/_posts</code>文件夹内除了<code>title.md</code>文件还有一个同名的文件夹<code>title</code>，<br>将你想在博文中插入的照片放到这个同名文件夹中即可。</li>
<li>插入图片只需要在想添加的位置写入以下形式，如<code>![图片1](1.png)</code>即可<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">![图片不能显示时的的替代文字](图片名字.图片格式)</span><br></pre></td></tr></table></figure>
另外也可将图片存储到网络上以加快加载速度，而<a href="https://sm.ms/" target="_blank" rel="noopener">SM.MS</a>是一个免费无注册的图片存储网站，我们可以将图片存储在上面然后把括号内换成图片的url就好了。</li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo插入图片</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo下valine评论系统报410错</title>
    <url>/2019/11/27/2019-11-27-valine-410-post-error/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hexo下的next主题安装的valine评论系统报以下错误：</p>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Code : undefined [410 POST https://avoscloud.com/1.1/classes/Comment]`</span><br></pre></td></tr></table></figure>

<p>一开始他是这样的<br><img src="https://i.loli.net/2019/11/28/bBpy98xVMHfagzD.png" alt="error410.png"><br>然后我再网上百度了一些解答，<a href="https://laytonsun.com/learning/2019-08/enable-comments.html" target="_blank" rel="noopener">有说是leancloud地区问题</a>的，<a href="https://www.jianshu.com/p/f4658df66a15" target="_blank" rel="noopener">也有说是版本之间一些参数的问题</a>，我检查一下我的发现都不是这些问题,</p>
<p>然后打开 <code>/next/_config.yml</code>主题配置文件看到了代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> <span class="comment"># When enable is set to be true</span></span><br><span class="line">  appid: 我的appid<span class="comment"># Your leancloud application appid</span></span><br><span class="line">  appkey: 我的appkey<span class="comment"># Your leancloud application appkey</span></span><br></pre></td></tr></table></figure>
<p>它在编辑器里是这样显示的<br><img src="https://i.loli.net/2019/11/28/jnU8TwqsO2Jbu9D.png" alt="config.png"><br>可以看到<code>enable: true</code>中的颜色根本没有改变，于是我把#及后面的注释换行，然后就高亮显示了，在运行一下，成功。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> </span><br><span class="line">  <span class="comment"># When enable is set to be true</span></span><br><span class="line">  appid: 我的appid</span><br><span class="line">  <span class="comment"># Your leancloud application appid</span></span><br><span class="line">  appkey: 我的appkey</span><br><span class="line">  <span class="comment"># Your leancloud application appkey</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo valine410错误</tag>
      </tags>
  </entry>
  <entry>
    <title>next主题如何添加动态背景canvas_nest</title>
    <url>/2019/11/27/2019-11-27-add-background-canvas-nest/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hexo next主题下怎么添加canvas_nest背景</p>
<a id="more"></a>
<p>我的hexo next是V7.5.0版本</p>
<ol>
<li>修改主题配置文件<br>打开 <code>/next/_config.yml</code>，<code>Ctrl+f</code>找到<code>Canvas-nest</code>，将<code>enable</code>改为<code>true</code><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-nest</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line">canvas_nest:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
接下来有两种方法：<br>方法一：修改布局文件<br>打开 <code>next/layout/_layout.swig</code>，在<code>&lt;body&gt;&lt;/body&gt;</code>标签内添加以下代码<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.canvas_nest %&#125;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span></span><br><span class="line"> src=<span class="string">"//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"</span>&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
方法二：下载插件<code>canvas-nest</code><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-canvas-nest</span><br><span class="line">themes/next-v7.5.0/<span class="built_in">source</span>/lib/canvas-nest</span><br></pre></td></tr></table></figure>
然后运行以下代码重新构建<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo动态背景</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo右下角添加2d动画模型</title>
    <url>/2019/11/27/2019-11-27-add-live2dDemo/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hexo右下角添加2d动画模型</p>
<a id="more"></a>
<ol>
<li>安装插件<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li>
<li>选择你喜欢的模型名字<br>在GitHub上<a href="https://github.com/summerscar/live2dDemo" target="_blank" rel="noopener">live2dDemo</a>有很多，可以选择里面的模型</li>
<li>将以下代码添加到主题配置文件_config.yml末尾，修改&lt;你喜欢的模型名字&gt;（如：z16）：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  scriptFrom: <span class="built_in">local</span></span><br><span class="line">  pluginRootPath: live2dw/</span><br><span class="line">  pluginJsPath: lib/</span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  tagMode: <span class="literal">false</span></span><br><span class="line">  <span class="built_in">log</span>: <span class="literal">false</span></span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-&lt;你喜欢的模型名字&gt;</span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
<li>建配置文件<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">在站点目录下建文件夹live2d_models，</span><br><span class="line">再在live2d_models下建文件夹&lt;你喜欢的模型名字&gt;,</span><br><span class="line">再在&lt;你喜欢的模型名字&gt;下建json文件：&lt;你喜欢的模型名字&gt;.model.json</span><br></pre></td></tr></table></figure></li>
<li>安装模型<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save live2d-widget-model-&lt;你喜欢的模型名字&gt;</span><br></pre></td></tr></table></figure></li>
<li>运行以下命令， 在<code>http://localhost:4000/</code>查看测试结果<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo添加live2dDemo</tag>
      </tags>
  </entry>
  <entry>
    <title>git bash每次运行hexo d都要输入密码的解决办法</title>
    <url>/2019/11/27/2019-11-27-hexo-no-password/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>每次运行hexo d都要输入密码的解决办法</p>
<a id="more"></a>
<p>尝试了网上的一些其他教程，都没有起作用，如</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">eval</span> `ssh-agent` </span><br><span class="line">ssh-add</span><br></pre></td></tr></table></figure>
<p>后来参考另一个解决方案：删除掉之前的passphrase密码就可以了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -p </span><br><span class="line"> 先确认旧密码</span><br><span class="line"> 当提示你输入新的密码的时候，直接两下enter就可以了</span><br></pre></td></tr></table></figure>
<p>另外还有一个<a href="https://www.jianshu.com/p/efaf72aab32e" target="_blank" rel="noopener">解决方案</a>：直接将你账号密码写在上传地址中,这样就不用每次更新都输入你的账号密码了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例如你的账号为: account,密码为 <span class="built_in">pwd</span>;</span><br><span class="line">那你的repo填写为下面这样即可</span><br><span class="line">github: https://account:<span class="built_in">pwd</span>@github.com/account/account.github.io.git</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo d去掉密码</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo配置404界面</title>
    <url>/2019/11/26/2019-11-26-hexo-add-404page/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>本文主要讲解hexo下的404界面配置</p>
<a id="more"></a>
<p>hexo托管于GitHub，所以404界面可以通过本地仓库添加到你的master分支的根目录下。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line"> git commit -a -m<span class="string">"404"</span></span><br><span class="line"> git push origin master</span><br></pre></td></tr></table></figure>
<p>但当你再次部署hexo的时候，github上面的404页面又被删除了，因为每次执行<code>hexo d</code>的时候，都是把hexo\public目录下的文件上传到GitHub，而在你本地的文件夹内并没有这个文件，所以一同步就没了。</p>
<!--more-->
<p>而如果将404.html直接放在根目录的source文件夹下，在编译的时候会改变文本内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo\<span class="built_in">source</span>\404.html</span><br></pre></td></tr></table></figure>
<p>所以改为放在你配置的主题文件夹下的source文件夹内，如果有css文件则放在同级css文件夹下:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo\themes\next\<span class="built_in">source</span>\404.html</span><br><span class="line">hexo\themes\next\<span class="built_in">source</span>\css\404.css</span><br></pre></td></tr></table></figure>
<p>这样在编译的时候会直接生成到public下,可以保持原本的内容直接被放到和index.html文件同级的public根目录下.</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo404界面</tag>
      </tags>
  </entry>
  <entry>
    <title>git的基本命令</title>
    <url>/2019/11/26/2019-11-26-basic-command-of-git/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>本文主要讲解一些git的基本操作语句的使用</p>
<a id="more"></a>
<h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init                <span class="comment">#初始化仓库</span></span><br><span class="line">git add readme.md       <span class="comment">#添加文件</span></span><br><span class="line">git status              <span class="comment">#查看文件状态（是否更改）</span></span><br><span class="line">git add .               <span class="comment">#把所有要提交的修改放到暂存区</span></span><br><span class="line">git commit -a -m <span class="string">"注释"</span> <span class="comment">#给所有变更的文件添加注释</span></span><br></pre></td></tr></table></figure>

<p>推送分支:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push origin master  <span class="comment">#本地同步到远程仓库</span></span><br></pre></td></tr></table></figure>
<p>远程分支同步到本地:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull origin master  <span class="comment">#远程仓库同步到本地</span></span><br></pre></td></tr></table></figure>
<h4 id="分支操作"><a href="#分支操作" class="headerlink" title="分支操作"></a>分支操作</h4><p>查看当前分支:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>
<p>创建dev分支，然后切换到dev分支:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b dev</span><br></pre></td></tr></table></figure>
<p>git checkout命令加上-b参数表示创建并切换，相当于以下两条命令:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch dev          <span class="comment"># 创建分支</span></span><br><span class="line">git checkout dev        <span class="comment"># 切换分支</span></span><br></pre></td></tr></table></figure>
<p>合并分支,git merge命令用于合并指定分支到当前分支：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git merge dev</span><br></pre></td></tr></table></figure>
<p>删除分支:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d dev</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git bash基本命令</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建hexo博客</title>
    <url>/2019/11/26/2019-11-26-build-a-hexo-blog/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>搭建hexo博客</p>
<a id="more"></a>
<h3 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h3><ol>
<li><p><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a>下载安装</p>
</li>
<li><p><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a>下载安装</p>
</li>
<li><p>安装hexo，在git bash运行以下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li>
<li><p>初始化Hexo，git bash依次运行以下命令即可：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务器，输入以下命令，运行即可</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure></li>
<li><p>浏览器访问网址:<code>http://localhost:4000/</code>，这时候你就可以看到自己的博客了</p>
</li>
</ol>
<h3 id="部署到GitHub"><a href="#部署到GitHub" class="headerlink" title="部署到GitHub"></a>部署到GitHub</h3><ol>
<li><p>创建GitHubpages</p>
</li>
<li><p>添加SSH key，在git bash运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"你的邮箱地址"</span></span><br></pre></td></tr></table></figure>
<p>注意在需要你输入密码的时候可以回车忽略，不然每次发布到GitHub上都需要输入密码，很麻烦</p>
</li>
<li><p>修改站点目录下的<code>_config.yml</code>文件，文件末尾添加：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:&lt;Github账号名称&gt;/&lt;Github账号名称&gt;.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>注意在每一个冒号后面都加上空格，不然会报错</p>
</li>
<li><p>推送到GithubPages。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></li>
<li><p>浏览器访问<code>https://&lt;Github账号名称&gt;.github.io/</code>这时候你就可以看到自己的博客运行在GitHub上了</p>
</li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo搭建</tag>
      </tags>
  </entry>
</search>
